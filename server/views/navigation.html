<div class="navbar is-light is-fixed-top">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item has-text-weight-bold" href="/">Banq</a>
            <a id="navbar-burger" class="navbar-burger burger"><span></span><span></span><span></span></a>
        </div>
        <div id="navbar-menu" class="navbar-menu">
            @if (Auth::check()):
                <div class="navbar-start">
                    @$accounts = Accounts::select([ 'user_id' => Auth::id() ])->fetchAll()
                    @if (count($accounts) > 0):
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a class="navbar-link is-arrowless" href="/accounts">Accounts</a>
                            <div class="navbar-dropdown">
                                @foreach ($accounts as $account):
                                    <a class="navbar-item" href="/accounts/{{ $account->id }}">{{ cut($account->name, 35) }}</a>
                                @endforeach
                            </div>
                        </div>
                    @else:
                        <a class="navbar-item" href="/accounts">Accounts</a>
                    @endif

                    @$transactions = Transactions::selectAll(5)->fetchAll()
                    @if (count($transactions) > 0):
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a class="navbar-link is-arrowless" href="/transactions">Transactions</a>
                            <div class="navbar-dropdown">
                                @foreach ($transactions as $transaction):
                                    <a class="navbar-item" href="/transactions/{{ $transaction->id }}">{{ cut($transaction->name, 35) }}</a>
                                @endforeach
                            </div>
                        </div>
                    @else:
                        <a class="navbar-item" href="/transactions">Transactions</a>
                    @endif
                </div>

                <div class="navbar-end">
                    <div class="navbar-item" style="display: flex; align-items: center;">
                        <img style="border-radius: 50%; margin-right: 12px;" src="https://www.gravatar.com/avatar/<?= md5(Auth::user()->email) ?>?s=48" alt="User gravater">
                        <span>{{ Auth::user()->username }}</span>
                    </div>
                    <div class="navbar-item">
                        <div class="buttons">
                            <a class="button" href="/auth/settings">Settings</a>
                            @if (Auth::user()->role == Users::ROLE_ADMIN):
                                <a class="button is-info" href="/admin">Admin</a>
                            @endif
                            <a class="button is-dark" href="/auth/logout">Logout</a>
                        </div>
                    </div>
                </div>
            @else:
                <div class="navbar-end">
                    <div class="navbar-item">
                        <div class="buttons">
                            <a class="button is-link" href="/auth/login">Login</a>
                            <a class="button" href="/auth/register">Register</a>
                        </div>
                    </div>
                </div>
            @endif
        </div>
    </div>
</div>
